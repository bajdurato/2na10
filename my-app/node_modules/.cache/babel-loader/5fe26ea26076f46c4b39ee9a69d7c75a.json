{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\bajdu\\\\Documents\\\\2na10\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\n// Helper function to enables passing an object with\n// the action.type as the key and the reducer function as the value\nexport const createReducer = (initialState = {}, actionHandlerKeyFuncs = {}) => {\n  return (state = initialState, action) => {\n    const actionHandler = actionHandlerKeyFuncs[action.type];\n    return actionHandler ? actionHandler(state, action) : state;\n  };\n}; // Creates a basic action\n\nconst createAction = (type, actionProps) => {\n  return _objectSpread({\n    type\n  }, actionProps);\n}; // e.g. createAsyncActionCreator('GET_TOP_MOVIES', getTopMovies, {page: 1})\n// I admit that passing the asyncRequestFn without params is not ideal, but \n// wanted to capture the requestParams as part of the start action for logging transparency\n\n\nexport const createAsyncActionCreator = (actionType, asyncRequestFn, requestParams) => {\n  return dispatch => {\n    dispatch(createAction(\"\".concat(actionType, \"_START\"), {\n      request: requestParams\n    })); // NOTE: asyncRequestFn must accept single object parameter\n    // in order to resolve param values\n\n    return asyncRequestFn(requestParams).then(response => {\n      response.json().then(json => dispatch(createAction(\"\".concat(actionType, \"_SUCCESS\"), {\n        response: json\n      }))).catch(error => dispatch(createAction(\"\".concat(actionType, \"_ERROR\"), {\n        error\n      })));\n    });\n  };\n}; // We're setting these based on the state of the request\n\nconst initialAsyncState = {\n  isLoading: false,\n  response: null,\n  request: null\n}; // Generic way of handling state changes for an async request\n// Can override {action_type}_START, {action_type}_SUCCESS, {action_type}_ERROR\n\nexport const createAsyncReducer = (actionType, actionHandlerKeyFuncs = {}, initialState = initialAsyncState) => {\n  const startReducerFn = (state, action) => _objectSpread({}, state, {\n    isLoading: true,\n    request: action.request\n  });\n\n  const successReducerFn = (state, action) => _objectSpread({}, state, {\n    isLoading: false,\n    response: action.response\n  });\n\n  const errorReducerFn = (state, action) => _objectSpread({}, state, {\n    isLoading: false,\n    error: action.error\n  });\n\n  return createReducer(initialState, _objectSpread({\n    [\"\".concat(actionType, \"_START\")]: startReducerFn,\n    [\"\".concat(actionType, \"_SUCCESS\")]: successReducerFn,\n    [\"\".concat(actionType, \"_ERROR\")]: errorReducerFn\n  }, actionHandlerKeyFuncs));\n};","map":{"version":3,"sources":["C:\\Users\\bajdu\\Documents\\2na10\\my-app\\src\\modules\\common\\redux.helpers.js"],"names":["createReducer","initialState","actionHandlerKeyFuncs","state","action","actionHandler","type","createAction","actionProps","createAsyncActionCreator","actionType","asyncRequestFn","requestParams","dispatch","request","then","response","json","catch","error","initialAsyncState","isLoading","createAsyncReducer","startReducerFn","successReducerFn","errorReducerFn"],"mappings":";AAAA;AACA;AACA,OAAO,MAAMA,aAAa,GAAG,CAACC,YAAY,GAAG,EAAhB,EAAoBC,qBAAqB,GAAG,EAA5C,KAAmD;AAC9E,SAAO,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkC;AACvC,UAAMC,aAAa,GAAGH,qBAAqB,CAACE,MAAM,CAACE,IAAR,CAA3C;AACA,WAAOD,aAAa,GAAGA,aAAa,CAACF,KAAD,EAAQC,MAAR,CAAhB,GAAkCD,KAAtD;AACD,GAHD;AAID,CALM,C,CAOP;;AACA,MAAMI,YAAY,GAAG,CAACD,IAAD,EAAOE,WAAP,KAAuB;AAC1C;AACEF,IAAAA;AADF,KAEKE,WAFL;AAID,CALD,C,CAOA;AACA;AACA;;;AACA,OAAO,MAAMC,wBAAwB,GAAG,CAACC,UAAD,EAAaC,cAAb,EAA6BC,aAA7B,KAA+C;AACrF,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACN,YAAY,WAAIG,UAAJ,aAAwB;AAAEI,MAAAA,OAAO,EAAEF;AAAX,KAAxB,CAAb,CAAR,CADmB,CAEnB;AACA;;AACA,WAAOD,cAAc,CAACC,aAAD,CAAd,CACJG,IADI,CACCC,QAAQ,IAAI;AAChBA,MAAAA,QAAQ,CAACC,IAAT,GACGF,IADH,CACQE,IAAI,IAAIJ,QAAQ,CAACN,YAAY,WAAIG,UAAJ,eAA0B;AAAEM,QAAAA,QAAQ,EAAEC;AAAZ,OAA1B,CAAb,CADxB,EAEGC,KAFH,CAESC,KAAK,IAAIN,QAAQ,CAACN,YAAY,WAAIG,UAAJ,aAAwB;AAAES,QAAAA;AAAF,OAAxB,CAAb,CAF1B;AAGD,KALI,CAAP;AAOD,GAXD;AAYD,CAbM,C,CAeP;;AACA,MAAMC,iBAAiB,GAAG;AAAEC,EAAAA,SAAS,EAAE,KAAb;AAAoBL,EAAAA,QAAQ,EAAE,IAA9B;AAAoCF,EAAAA,OAAO,EAAE;AAA7C,CAA1B,C,CAEA;AACA;;AACA,OAAO,MAAMQ,kBAAkB,GAAG,CAACZ,UAAD,EAAaR,qBAAqB,GAAG,EAArC,EAAyCD,YAAY,GAAGmB,iBAAxD,KAA8E;AAC9G,QAAMG,cAAc,GAAG,CAACpB,KAAD,EAAQC,MAAR,uBAClBD,KADkB;AAErBkB,IAAAA,SAAS,EAAE,IAFU;AAGrBP,IAAAA,OAAO,EAAEV,MAAM,CAACU;AAHK,IAAvB;;AAMA,QAAMU,gBAAgB,GAAG,CAACrB,KAAD,EAAQC,MAAR,uBACpBD,KADoB;AAEvBkB,IAAAA,SAAS,EAAE,KAFY;AAGvBL,IAAAA,QAAQ,EAAEZ,MAAM,CAACY;AAHM,IAAzB;;AAKA,QAAMS,cAAc,GAAG,CAACtB,KAAD,EAAQC,MAAR,uBAClBD,KADkB;AAErBkB,IAAAA,SAAS,EAAE,KAFU;AAGrBF,IAAAA,KAAK,EAAEf,MAAM,CAACe;AAHO,IAAvB;;AAMA,SAAOnB,aAAa,CAClBC,YADkB;AAGhB,eAAIS,UAAJ,cAAyBa,cAHT;AAIhB,eAAIb,UAAJ,gBAA2Bc,gBAJX;AAKhB,eAAId,UAAJ,cAAyBe;AALT,KAMbvB,qBANa,EAApB;AASD,CA3BM","sourcesContent":["// Helper function to enables passing an object with\r\n// the action.type as the key and the reducer function as the value\r\nexport const createReducer = (initialState = {}, actionHandlerKeyFuncs = {}) => {\r\n  return (state = initialState, action) => {\r\n    const actionHandler = actionHandlerKeyFuncs[action.type];\r\n    return actionHandler ? actionHandler(state, action) : state;\r\n  }\r\n};\r\n\r\n// Creates a basic action\r\nconst createAction = (type, actionProps) => {\r\n  return {\r\n    type,\r\n    ...actionProps\r\n  };\r\n}\r\n\r\n// e.g. createAsyncActionCreator('GET_TOP_MOVIES', getTopMovies, {page: 1})\r\n// I admit that passing the asyncRequestFn without params is not ideal, but \r\n// wanted to capture the requestParams as part of the start action for logging transparency\r\nexport const createAsyncActionCreator = (actionType, asyncRequestFn, requestParams) => {\r\n  return (dispatch) => {\r\n    dispatch(createAction(`${actionType}_START`, { request: requestParams }));\r\n    // NOTE: asyncRequestFn must accept single object parameter\r\n    // in order to resolve param values\r\n    return asyncRequestFn(requestParams)\r\n      .then(response => {\r\n        response.json()\r\n          .then(json => dispatch(createAction(`${actionType}_SUCCESS`, { response: json })))\r\n          .catch(error => dispatch(createAction(`${actionType}_ERROR`, { error })));\r\n      });\r\n\r\n  };\r\n}\r\n\r\n// We're setting these based on the state of the request\r\nconst initialAsyncState = { isLoading: false, response: null, request: null };\r\n\r\n// Generic way of handling state changes for an async request\r\n// Can override {action_type}_START, {action_type}_SUCCESS, {action_type}_ERROR\r\nexport const createAsyncReducer = (actionType, actionHandlerKeyFuncs = {}, initialState = initialAsyncState) => {\r\n  const startReducerFn = (state, action) => ({\r\n    ...state,\r\n    isLoading: true,\r\n    request: action.request\r\n  });\r\n\r\n  const successReducerFn = (state, action) => ({\r\n    ...state,\r\n    isLoading: false,\r\n    response: action.response\r\n  });\r\n  const errorReducerFn = (state, action) => ({\r\n    ...state,\r\n    isLoading: false,\r\n    error: action.error\r\n  });\r\n\r\n  return createReducer(\r\n    initialState,\r\n    {\r\n      [`${actionType}_START`]: startReducerFn,\r\n      [`${actionType}_SUCCESS`]: successReducerFn,\r\n      [`${actionType}_ERROR`]: errorReducerFn,\r\n      ...actionHandlerKeyFuncs\r\n    }\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}